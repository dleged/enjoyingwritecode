> 私域加粉 临平公安有 100w 的粉丝量了
# 自我介绍

  面试官下午好，我先花1-2分钟介绍最近一份工作的经历。
  百应科技是一家基于AI能力、通讯能力为企业和政府提供AI数智化解决方案的公司。
  我们核心业务方向就是 AI 智能机器人。那我们的企业客户主要是利用 AI 外呼能力进行拓客和客户服务。政府客户主要是用于网络诈骗的宣防和劝阻工作的治理，以及私域运营相关的工作。
  在职的2年多时间内，主要负责核心业务开发，以及完善部分前端体系建设的工作。
  落地了一套微前端的研发解决方案，为公司的多个业务线提供了产品功能快速可插拔的能力。
  并在工作过程中持续推进前端基础建设、完善 DevOps 的流程，提升研发效率与质量。
  有较强的沟通能力、拿结果意识，以及较强的发现并解决问题的能力，通过技术手段解决业务问题。

# 体系建设
### 前端体系建设总分总：
  研发在产品交付的流程上进行优化，就是在 devOps 上进行优化。
  开发阶段：
  - 主子应用调试难的问题，设计和开发一个 cli 工具
  - 组件库：测试，发布流程和标准
  - 项目权限：了解和沟通成本
  - 搭建新项目流程：流程复杂和重复、沟通成本

  发布阶段：
  - 资源自动上传和发布：之前我们是通过手动配置，现在 lego-script

  运维阶段：
  - 创建所需的 k8s 配置：都是手动

  体验专项：
  - 用户体验专项：私域易聊宝、机器人

  总结一下：完成业务侧的工作之外做的建设


# 如何在技术角度去推动产品功能的优化
  - S: 发现有消息识别不了 -> 手动
  - 提了：居民消息推送 -> 落库
  - 过程：前端 node 服务接收易聊宝的消息，推给警察微信
  - 结果：居民的服务满意度提高了，跟警察
  - 优化：- 居民消息推送 %10 -> 落库 -> 知识库
## 未来发展期望找一家比较大的平台发展，

# 百应 qiankun 微前端架构的价值/亮点

## 背景
  - 我们是 node 中台 +  SSR 渲染的微前端架构，页面跳转会刷新
  - 业务变化快，产品之间需要组合能力
  - 契机：产品架构权限 2.0
## 过程
  - 承担 PM 角色，在 1 个月上线组织架构 2.0 
  - 技术选型：成本，收益，风险
    - iframe 不考虑，体验问题，运行时的消耗等 结果不好
    - single-spa 提供了路由管理能力和运行状态管理，没有做 js 和 css 的隔离 成本太高
    - qiankun 提供 js 和 css 的隔离机制，通信机制，应用预加载，缺少保活机制
    总结：iframe 基本不满足要求，会刷新页面，菜单不能灵活组装。single-spa 不提供 js 沙箱、css 隔离等机制。
    所以选择了 qiankun，成本、收益、风险可衡量
  - 2、3个项目落地，协调各业务团队进行接入和改造
  - 遇到运行时的问题攻克
  
## 结果
    - 沉淀一套前端的研发解决方案， 在公司 5 个平台中
    - SaaS 功能方便迁移到私有化环境，SaaS bot迁移到私有化
    - 做到 1 周快速的交付政务的产品矩阵
    - 快速交付效率提升：2020年上线周迭代 1606 -> 2021年 1895 提高 `18%`，年度项目 266 -> 293 提高 `10%` 
## 总结
  - PM 能力的认知提升
  - 本地调试体验非常差，效率很慢。于是就设计了 lego-start，
  - 收获了一定大型项目开发经验，算是全面了解了 SaaS 这边所有技术点和问题
  - 后续
## 复盘
    - 没有 SSR 的同构和降级
    - 升级为社区的 qiankun2.6.3 -> qiankun2.8


# 遇到最大的挑战

## qiankun 和项目运行的问题的根治，用了大量的 style-components、地图。时间紧


# 你是如何管理团队的

用人和资源去做更多有价值的事情

## 非职权领导力 + 项目五大过程组

## 目标管理
  - 公司和产品目标的拆解，即承上启下、也是个翻译者
  - 季度 OKR 制定、复盘

## 技术管理
  - 技术方案、选型
  - 技术分享、CR
  - 技术规范制定：编码规范，工程规范，
  - 基础建设小组

## 人管理
  - 培养、规划、考核
  - 价值观、愿景和团队文化
  - 看重执行力
  - 人员沙盘
  - 先人后事

# 你有什么亮点
  ## 安盾项目私域
  ## 前端微前端研发解决方案
    - 开发时、部署、发布
    - 运行时和库的兼容问题、不方便调试

  ## 质检录音文件下载
    - 文件数量过多 万级
    - 不阻塞下载和渲染 worker + 异步并发
    - 支持断网续传 file system + indexDB

# 重构思想
 
  ## global-settings 为什么重构
    - 业务逻辑代码混乱，不好梳理
    - class 组件写法不好复用，都是重复的代码组件
    - 样式和其他项目不统一
    - 订单模块存在安全问题，金额的存储前后端都没校验

  ## 重构实践
    ### 前期准备
      - 目标制定
      - 梳理业务流程图
      - 文档先行
      - 确定重构的规范：技术选型、提交规范、lint 规范、样式规范等
    ### 定计划
      - 按业务模块分
      - 定优先级
      - 工时评估
    ### 过程
      - 删除代码、重新创建项目独立分支，避免后期 review 代码改动多
      - 独立分支开发，避免代码冲突
      - 重构过程：先修复 lint、tsc 报错。再改业务代码
      - 每天同步主分支代码
    ### 测试
      - 部署一套新环境，与老环境对比自测
      - 按阶段提测
    ### 发布
      - 根据账号，灰度发布 20% 40% 。。。
    ### 复盘
      - 目标审查
      - 取得结果
      - 问题发现
      - 总结经验